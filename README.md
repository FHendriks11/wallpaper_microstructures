Code to generate random geometries for soft porous mechanical metamaterials (a.k.a. flexible material with holes in it), used to create this dataset of 1020 microstructures, available on Zenodo here: https://zenodo.org/records/15849550, as described in our preprint: https://arxiv.org/abs/2507.11195.

Deformation of these microstructures was simulated with the matlab code in this repository: https://github.com/FHendriks11/mechmetamat_homogenization

The microstructure generation code will call gmsh, so please ensure you have gmsh installed (we used version 4.12.2, but newer versions will probably also work fine) and it is added to your path.

## Contains:

To generate new microstructures:
* **data_myMeshes.py**: the most important part of the repository. Contains a function to generate one microstructure. Can be used from command line with arguments (use option -h to see usage), or the function `generate_material_geometry` can be imported from it and used.
* **helper_funcs.py**: convenience functions imported in the other scripts.
* **generate_materials_in_parallel.py**: calls the function `generate_material_geometry` from data_myMeshes.py multiple times in parallel.

To process the MatLab results:
* **combine_results.ipynb**: imports all the matlab results and formats them into a dict and saves it to a .pkl file.
* **create_plots.ipynb**: from the final dataset, create plots, including most of the plots in the paper.
* **mesh_convergence.ipynb**: create meshes for mesh convergence study, these must be imported in the matlab code, then the results can be imported and analyzed in this Notebook.

To check the results:
* **check_matlab_mistakes.ipynb**: investigate the list, generated by running `combine_results.ipynb`, of error trajectories , where the matlab results were (partially) missing or ended in an error.
* **check_output_files.ipynb**: prints overviews of the contents of all the generated files which will be combined in combine_results.ipynb.

Python libraries used:
* **requirements.txt**

### Support
f.hendriks@tue.nl

### Authors
Fleur Hendriks.

### License
This repository by Fleur Hendriks is licensed under CC BY 4.0. See the license file here: https://creativecommons.org/licenses/by/4.0/ for more details.

### Citation
If you use this dataset, please cite our preprint https://arxiv.org/abs/2507.11195 as follows:

```bibtex
@misc{hendriks2025wallpapergroupbasedmechanicalmetamaterials,
      title={Wallpaper Group-Based Mechanical Metamaterials: Dataset Including Mechanical Responses}, 
      author={Fleur Hendriks and Vlado Menkovski and Martin Doškář and Marc G. D. Geers and Kevin Verbeek and Ondřej Rokoš},
      year={2025},
      eprint={2507.11195},
      archivePrefix={arXiv},
      primaryClass={cond-mat.soft},
      url={https://arxiv.org/abs/2507.11195}, 
}
```

## Known issues:
* Determining unique edges when creating secondary face polygon is not perfect: e.g. in p3, it can say that alternating identical edges are all identical (i.e., it says [0,0,0,0,0,0] instead of [0,1,0,1,0,1]). E.g., see p3_hexagonal_2024-05-22_15-27-41.446815. Use uc['proto_inds'] instead (but still take into account flipping). 'symm' is not necessary, and in fact is giving some holes mirror symmetry when they don't need it, see e.g. p4_square_2024-05-22_14-58-43.800779.
* Because of the way the boundaries are connected in p6, the geometry will sometimes result in p6m or a geometry close to p6m if the inner nodes are not used. E.g., p6_hexagonal_2024-05-22_15-48-50.374392
* The periodicity is not actually enforced by gmsh, because the boolean subtraction creates new boundaries. Fortunately, gmsh by default picks equidistant points on the boundary, so it still works out almost always so far, but if the mesh resolution is changed or other (adaptive) mesh generation methods are used, this may result in violating the periodicity.
